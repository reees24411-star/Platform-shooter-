<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Top-Down Shooter</title>
<style>
  body {
    margin: 0;
    background: #111;
    color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    font-family: sans-serif;
  }
  canvas {
    background: #222;
    display: block;
  }
</style>
</head>
<body>
<canvas id="gameCanvas" width="600" height="600"></canvas>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

const player = { x: 300, y: 300, width: 20, height: 20, speed: 4 };
const bullets = [];
const enemies = [];
let score = 0;

const keys = {};

document.addEventListener('keydown', e => keys[e.key] = true);
document.addEventListener('keyup', e => keys[e.key] = false);
document.addEventListener('keydown', e => {
    if (e.key === ' ') {
        bullets.push({ x: player.x + player.width/2 - 5, y: player.y, width: 10, height: 10, speed: 7 });
    }
});

function spawnEnemy() {
    const x = Math.random() * (canvas.width - 20);
    const y = Math.random() * (canvas.height - 20);
    enemies.push({ x, y, width: 20, height: 20, dx: (Math.random() - 0.5)*2, dy: (Math.random() - 0.5)*2 });
}

function update() {
    // Player movement
    if (keys['ArrowUp']) player.y -= player.speed;
    if (keys['ArrowDown']) player.y += player.speed;
    if (keys['ArrowLeft']) player.x -= player.speed;
    if (keys['ArrowRight']) player.x += player.speed;

    // Keep player in bounds
    player.x = Math.max(0, Math.min(canvas.width - player.width, player.x));
    player.y = Math.max(0, Math.min(canvas.height - player.height, player.y));

    // Update bullets
    bullets.forEach((b, i) => {
        b.y -= b.speed;
        if (b.y < 0) bullets.splice(i,1);
    });

    // Update enemies
    enemies.forEach((e, i) => {
        e.x += e.dx;
        e.y += e.dy;

        // Bounce off walls
        if (e.x < 0 || e.x > canvas.width - e.width) e.dx *= -1;
        if (e.y < 0 || e.y > canvas.height - e.height) e.dy *= -1;

        // Check collision with bullets
        bullets.forEach((b,j) => {
            if (b.x < e.x + e.width && b.x + b.width > e.x && b.y < e.y + e.height && b.y + b.height > e.y) {
                bullets.splice(j,1);
                enemies.splice(i,1);
                score += 1;
            }
        });

        // Check collision with player
        if (player.x < e.x + e.width && player.x + player.width > e.x && player.y < e.y + e.height && player.y + player.height > e.y) {
            alert('Game Over! Score: ' + score);
            location.reload();
        }
    });

    // Spawn new enemies
    if (enemies.length < 5) spawnEnemy();
}

function draw() {
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // Draw player
    ctx.fillStyle = 'lime';
    ctx.fillRect(player.x, player.y, player.width, player.height);

    // Draw bullets
    ctx.fillStyle = 'yellow';
    bullets.forEach(b => ctx.fillRect(b.x,b.y,b.width,b.height));

    // Draw enemies
    ctx.fillStyle = 'red';
    enemies.forEach(e => ctx.fillRect(e.x,e.y,e.width,e.height));

    // Draw score
    ctx.fillStyle = 'white';
    ctx.fillText('Score: ' + score, 10, 20);
}

function gameLoop() {
    update();
    draw();
    requestAnimationFrame(gameLoop);
}

gameLoop();
</script>
</body>
</html>
